<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file –ì–æ–ª–æ–≤–Ω–∏–π –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –º–æ–¥—É–ª—å –≥—Ä–∏ "–í–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
 * @module GuessTheNumber
 * @version 1.1.0
 * @author –í–∞—à–µ –Ü–º'—è &lt;email@example.com>
 * @license MIT
 * @requires https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js
 * @see {@link https://github.com/Alexdabd22/Guess-the-number.git}
 * @description –ì–æ–ª–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –≥—Ä–∏ —Ç–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é –∑ API —Å–µ—Ä–≤–µ—Ä–æ–º.
 */

/**
 * –ë–∞–∑–æ–≤–∏–π URL API —Å–µ—Ä–≤–µ—Ä–∞
 * @constant {string}
 * @default
 */
const API = "http://localhost:3000";
/**
 * –õ—ñ—á–∏–ª—å–Ω–∏–∫ —Å–ø—Ä–æ–± —É –ø–æ—Ç–æ—á–Ω—ñ–π –≥—Ä—ñ
 * @type {number}
 * @default 0
 */
let guessCount = 0;
/**
 * –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ—á–∞—Ç–∫—É –≥—Ä–∏
 * @async
 * @function
 * @listens module:GuessTheNumber~click
 * @throws {Error} –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
 * @example
 * // –Ü–Ω—ñ—Ü—ñ—é—î –Ω–æ–≤—É –≥—Ä—É –ø—Ä–∏ –∫–ª—ñ–∫—É
 * document.getElementById('start').click();
 */
document.getElementById("start").addEventListener("click", async () => {
    try {
        const response = await fetch(`${API}/game/start`, {
            method: "POST",
            credentials: "include",
            headers: {
                "Content-Type": "application/json"
            }
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        document.getElementById("feedback").textContent = data.message;
        document.getElementById("controls").classList.remove("hidden");
        document.getElementById("controls").classList.add("show");
        document.getElementById("progress").style.width = "0%";
        guessCount = 0;
        document.getElementById("startSound").play();
    } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –≥—Ä–∏:", error);
        document.getElementById("feedback").textContent = "–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –±–µ–∫–µ–Ω–¥.";
    }
});
/**
 * –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–ø—Ä–æ–±–∏ –≤–≥–∞–¥–∞—Ç–∏ —á–∏—Å–ª–æ
 * @function onGuessClick
 * @listens module:GuessTheNumber~click
 * @fires module:GuessTheNumber~guessSubmitted
 * @throws {TypeError} –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ–º—É –≤–≤–µ–¥–µ–Ω–Ω—ñ
 * @example
 * // –í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ –≤—ñ–¥ 1 –¥–æ 100 —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É
 * document.getElementById('guessInput').value = 42;
 * document.getElementById('guessBtn').click();
 */
document.getElementById("guessBtn").addEventListener("click", () => {
    const value = parseInt(document.getElementById("guessInput").value);

    if (isNaN(value) || value &lt; 1 || value > 100) {
        document.getElementById("feedback").textContent = "–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ –≤—ñ–¥ 1 –¥–æ 100";
        return;
    }

    fetch(`${API}/game/guess`, {
        method: "POST",
        credentials: "include",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ guess: value })
    })
        .then(res => res.json())
        .then(data => {
            const feedback = document.getElementById("feedback");
            feedback.textContent = data.message;
            guessCount++;
            document.getElementById("progress").style.width = `${(guessCount / 10) * 100}%`;

            if (data.result === "correct") {
                document.getElementById("guessInput").disabled = true;
                document.getElementById("guessBtn").disabled = true;
                feedback.classList.add("correct");
                document.getElementById("winSound").play();

                const currentAttempts = parseInt(data.message.match(/\d+/)[0]);
                updateRecords(currentAttempts);
                updateGameHistory(currentAttempts);
                displayGameHistory();
            }
        })
        .catch(error => {
            console.error("Error:", error);
            document.getElementById("feedback").textContent = "–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ —Å–ø—Ä–æ–±–∏";
        });
});

/**
 * –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–∫–∏–¥–∞–Ω–Ω—è –≥—Ä–∏
 * @function onRestartClick
 * @listens module:GuessTheNumber~click
 * @fires module:GuessTheNumber~gameRestarted
 */
document.getElementById("restart").addEventListener("click", () => {
    fetch(`${API}/game/restart`, {
        method: "POST",
        credentials: "include"
    })
        .then(res => res.json())
        .then(data => {
            document.getElementById("feedback").textContent = data.message;
            document.getElementById("feedback").classList.remove("correct");
            document.getElementById("guessInput").value = "";
            document.getElementById("guessInput").disabled = false;
            document.getElementById("guessBtn").disabled = false;
            document.getElementById("progress").style.width = "0%";
            guessCount = 0;
        })
        .catch(error => {
            console.error("Error:", error);
            document.getElementById("feedback").textContent = "–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å–∫–∏–¥–∞–Ω–Ω—ñ –≥—Ä–∏";
        });
});

/**
 * –û–Ω–æ–≤–ª—é—î —Ä–µ–∫–æ—Ä–¥ –≥—Ä–∞–≤—Ü—è —É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å—Ö–æ–≤–∏—â—ñ
 * @function updateRecords
 * @param {number} attempts - –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±
 */
function updateRecords(attempts) {
    const best = localStorage.getItem("bestScore");
    const feedback = document.getElementById("feedback");

    if (!best || attempts &lt; best) {
        localStorage.setItem("bestScore", attempts);
        feedback.textContent += " üèÜ –ù–æ–≤–∏–π —Ä–µ–∫–æ—Ä–¥!";
    } else {
        feedback.textContent += ` (–†–µ–∫–æ—Ä–¥: ${best})`;
    }
}

/**
 * –û–Ω–æ–≤–ª—é—î —ñ—Å—Ç–æ—Ä—ñ—é —ñ–≥–æ—Ä —É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å—Ö–æ–≤–∏—â—ñ
 * @function updateGameHistory
 * @param {number} attempts - –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±
 */
function updateGameHistory(attempts) {
    let gamesHistory = JSON.parse(localStorage.getItem("gamesHistory")) || [];
    gamesHistory.push(attempts);

    if (gamesHistory.length > 10) {
        gamesHistory = gamesHistory.slice(-10);
    }

    localStorage.setItem("gamesHistory", JSON.stringify(gamesHistory));
}

/**
 * –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —ñ—Å—Ç–æ—Ä—ñ—é —ñ–≥–æ—Ä –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞
 * @function displayGameHistory
 * @listens module:GuessTheNumber~DOMContentLoaded
 * @description –û–Ω–æ–≤–ª—é—î —Å–ø–∏—Å–æ–∫ —ñ—Å—Ç–æ—Ä—ñ—ó —ñ–≥–æ—Ä –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∑ –¥–∞–Ω–∏—Ö localStorage
 * @since 1.1.0
 */
function displayGameHistory() {
    const historyList = document.getElementById("gameHistory");
    historyList.innerHTML = "";

    const gamesHistory = JSON.parse(localStorage.getItem("gamesHistory")) || [];
    gamesHistory.forEach((game, index) => {
        const li = document.createElement("li");
        li.textContent = `–ì—Ä–∞ ${index + 1}: ${game} —Å–ø—Ä–æ–±`;
        historyList.appendChild(li);
    });
}
/**
 * –ü–æ–¥—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
 * @event module:GuessTheNumber~DOMContentLoaded
 * @description –í–∏–Ω–∏–∫–∞—î –ø—Ä–∏ –ø–æ–≤–Ω–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ DOM –¥–µ—Ä–µ–≤–∞
 */
window.addEventListener('DOMContentLoaded', () => {
    displayGameHistory();
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-GuessTheNumber.html">GuessTheNumber</a></li></ul><h3>Events</h3><ul><li><a href="module-GuessTheNumber.html#~event:DOMContentLoaded">DOMContentLoaded</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Apr 24 2025 16:00:05 GMT+0300 (–∑–∞ —Å—Ö—ñ–¥–Ω–æ—î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏–º –ª—ñ—Ç–Ω—ñ–º —á–∞—Å–æ–º)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
